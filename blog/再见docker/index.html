<!DOCTYPE html>
<html lang="zh-cn">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<meta name="author" content="Arthur Dent">
<meta name="description" content="再见Docker  刚刚开始，却又说再见！
 0x00 缘起 第一次遇到docker是由于学习go语言的时候，发现有人居然用go写了一个应用容器引擎，而且docker的使用非常方便。就那句话，“谁用谁知道”。哈哈～～
今天突然发现，自己被很多东西困扰了。是时候给自己来一个断舍离了，所以就拿电脑中不经常使用的app开刀了。docker在电脑中待了很长时间了，以至于打开的时候，看看目前的版本是否修复了原来Docker.qcow2文件是否只能呆在固定位置的情况，发现已经可以随意调整了，给docker点赞的同时也决定了删除她，毕竟要给自己做断舍离的同时，也想让自己聚焦一下，太发散了，累。
0x01 docker 常用命令 1. 查看本地可用镜像 docker images 2. 查看运行的容器 docker ps 3. 查看所有的容器 docker ps -a 4. 停止容器 docker stop container 5. 启动容器 docker start container 6. 删除容器 docker rm container 7. 删除镜像 docker rmi image name 8. 从Docker容器内拷贝文件到主机上 docker cp &lt;containerId&gt;:/file/path/within/container /host/path/target 9. 终极命令 docker COMMAND --help 使用docker自带的命令来看命令的使用。
例如，我不知道docker pause 怎么使用，用来干什么，那么我就输入docker pause &ndash;help来显示结果，如下所示：
bingyideMacBook-Pro:~ guoby$ docker stop --help Usage:	docker stop [OPTIONS] CONTAINER [CONTAINER.">

<meta property="og:title" content="再见Docker" />
<meta property="og:description" content="再见Docker  刚刚开始，却又说再见！
 0x00 缘起 第一次遇到docker是由于学习go语言的时候，发现有人居然用go写了一个应用容器引擎，而且docker的使用非常方便。就那句话，“谁用谁知道”。哈哈～～
今天突然发现，自己被很多东西困扰了。是时候给自己来一个断舍离了，所以就拿电脑中不经常使用的app开刀了。docker在电脑中待了很长时间了，以至于打开的时候，看看目前的版本是否修复了原来Docker.qcow2文件是否只能呆在固定位置的情况，发现已经可以随意调整了，给docker点赞的同时也决定了删除她，毕竟要给自己做断舍离的同时，也想让自己聚焦一下，太发散了，累。
0x01 docker 常用命令 1. 查看本地可用镜像 docker images 2. 查看运行的容器 docker ps 3. 查看所有的容器 docker ps -a 4. 停止容器 docker stop container 5. 启动容器 docker start container 6. 删除容器 docker rm container 7. 删除镜像 docker rmi image name 8. 从Docker容器内拷贝文件到主机上 docker cp &lt;containerId&gt;:/file/path/within/container /host/path/target 9. 终极命令 docker COMMAND --help 使用docker自带的命令来看命令的使用。
例如，我不知道docker pause 怎么使用，用来干什么，那么我就输入docker pause &ndash;help来显示结果，如下所示：
bingyideMacBook-Pro:~ guoby$ docker stop --help Usage:	docker stop [OPTIONS] CONTAINER [CONTAINER." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://guobingyi.github.io/blog/%E5%86%8D%E8%A7%81docker/" />
<meta property="article:published_time" content="2019-02-12T10:56:46+08:00" />
<meta property="article:modified_time" content="2019-02-12T10:56:46+08:00" />


<title>


     再见Docker 

</title>
<link rel="canonical" href="https://guobingyi.github.io/blog/%E5%86%8D%E8%A7%81docker/">







<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/styles/default.min.css">




<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Ubuntu+Mono:400,400i,700,700i|Raleway:500">



    
    <link rel="stylesheet" href="https://guobingyi.github.io/css/reset.css?t=2021-01-14%2019%3a18%3a25.127038%20%2b0800%20CST%20m%3d%2b2.382045775">
    <link rel="stylesheet" href="https://guobingyi.github.io/css/pygments.css?t=2021-01-14%2019%3a18%3a25.127038%20%2b0800%20CST%20m%3d%2b2.382045775">
    <link rel="stylesheet" href="https://guobingyi.github.io/css/main.css?t=2021-01-14%2019%3a18%3a25.127038%20%2b0800%20CST%20m%3d%2b2.382045775">
    
        <link rel="stylesheet" href="https://guobingyi.github.io/css/override.css?t=2021-01-14%2019%3a18%3a25.127038%20%2b0800%20CST%20m%3d%2b2.382045775">
    




<link rel="shortcut icon"

    href="https://guobingyi.github.io/img/leaf.ico"

>








</head>


<body lang="en">

<section class="header">
    <div class="container">
        <div class="content">
            
                
                
                
                
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                
                <a href="https://guobingyi.github.io/"><img class="avatar" src="https://guobingyi.github.io/img/profile.png" srcset="https://guobingyi.github.io/img/profile.png 1x"></a>
            
            <a href="https://guobingyi.github.io/"><div class="name">Arthur Dent</div></a>
            
            <nav>
                <ul>
                    
                        <li class="nav-blog"><a href="https://guobingyi.github.io/blog/"><span>Blog</span></a></li>
                    
                        <li class="nav-movie"><a href="https://guobingyi.github.io/movie/"><span>Movie</span></a></li>
                    
                        <li class="nav-code"><a href="https://guobingyi.github.io/code/"><span>Code</span></a></li>
                    
                        <li class="nav-life"><a href="https://guobingyi.github.io/life/"><span>Life</span></a></li>
                    
                        <li class="nav-opensource"><a href="https://guobingyi.github.io/opensource/"><span>OpenSource</span></a></li>
                    
                        <li class="nav-emacs"><a href="https://guobingyi.github.io/emacs/"><span>Emacs</span></a></li>
                    
                        <li class="nav-mac"><a href="https://guobingyi.github.io/mac/"><span>Mac</span></a></li>
                    
                        <li class="nav-book"><a href="https://guobingyi.github.io/book/"><span>Book</span></a></li>
                    
                        <li class="nav-about"><a href="https://guobingyi.github.io/about/"><span>About</span></a></li>
                    
                </ul>
            </nav>
        </div>
    </div>
</section>

<section class="icons">
    <div class="container">
        <div class="content">
        
            <a href="//github.com/guobingyi" target="_blank" rel="noopener"><img class="icon" src="https://guobingyi.github.io/img/github.svg" alt="github" /></a>
        

        

        

	

        

        

        

        

        

        

        

        
            <a href="mailto:likemi7@126.com"><img class="icon" src="https://guobingyi.github.io/img/email.svg" alt="email" /></a>
        

        

        
        </div>
    </div>
</section>


<section class="main post non-narrow zero-top-spacing">
    <div class="container">
        <div class="content">
            <div class="front-matter">
                <div class="title-container">
                    <div class="page-heading">

    再见Docker

</div>

                    <div class="initials"><a href="https://guobingyi.github.io/">ad</a></div>
                </div>
                <div class="meta">
                    
                    <div class="date" title='Tue Feb 12 2019 10:56:46 CST'>Feb 12, 2019</div>
                    
                    
		    <div class="reading-time"><div class="middot"></div>2 minutes read</div>
                    
                </div>
            </div>
            <div class="markdown">
                <h2 id="再见docker">再见Docker</h2>
<blockquote>
<p>刚刚开始，却又说再见！</p>
</blockquote>
<h3 id="0x00-缘起">0x00 缘起</h3>
<p>第一次遇到docker是由于学习go语言的时候，发现有人居然用go写了一个应用容器引擎，而且docker的使用非常方便。就那句话，“谁用谁知道”。哈哈～～</p>
<p>今天突然发现，自己被很多东西困扰了。是时候给自己来一个断舍离了，所以就拿电脑中不经常使用的app开刀了。docker在电脑中待了很长时间了，以至于打开的时候，看看目前的版本是否修复了原来Docker.qcow2文件是否只能呆在固定位置的情况，发现已经可以随意调整了，给docker点赞的同时也决定了删除她，毕竟要给自己做断舍离的同时，也想让自己聚焦一下，太发散了，累。</p>
<h3 id="0x01-docker-常用命令">0x01 docker 常用命令</h3>
<h4 id="1-查看本地可用镜像">1. 查看本地可用镜像</h4>
<pre><code>docker images 
</code></pre><h4 id="2-查看运行的容器">2. 查看运行的容器</h4>
<pre><code>docker ps
</code></pre><h4 id="3-查看所有的容器">3. 查看所有的容器</h4>
<pre><code>docker ps -a
</code></pre><h4 id="4-停止容器">4. 停止容器</h4>
<pre><code>docker stop container
</code></pre><h4 id="5-启动容器">5. 启动容器</h4>
<pre><code>docker start container
</code></pre><h4 id="6-删除容器">6. 删除容器</h4>
<pre><code>docker rm container
</code></pre><h4 id="7-删除镜像">7. 删除镜像</h4>
<pre><code>docker rmi image name
</code></pre><h4 id="8-从docker容器内拷贝文件到主机上">8. 从Docker容器内拷贝文件到主机上</h4>
<pre><code>docker cp &lt;containerId&gt;:/file/path/within/container /host/path/target
</code></pre><h4 id="9-终极命令">9. 终极命令</h4>
<pre><code>docker COMMAND --help
</code></pre><p>使用docker自带的命令来看命令的使用。</p>
<p>例如，我不知道docker pause 怎么使用，用来干什么，那么我就输入docker pause &ndash;help来显示结果，如下所示：</p>
<pre><code>bingyideMacBook-Pro:~ guoby$ docker stop --help

Usage:	docker stop [OPTIONS] CONTAINER [CONTAINER...]

Stop one or more running containers

Options:
  -t, --time int   Seconds to wait for stop before killing it (default 10)
bingyideMacBook-Pro:~ guoby$ docker pause --help

Usage:	docker pause CONTAINER [CONTAINER...]

Pause all processes within one or more containers
</code></pre><p>怎么样？是不是很爽哦，避免了很多要记忆的东西，同时也知道了docker有那些命令，是用来干什么的。</p>
<h3 id="0x02-docker-实践">0x02 docker 实践</h3>
<p>我的docker环境在mac下使用，windows下也使用过，但是体验不是很好，用了docker就不能用vm，非常尴尬！</p>
<h4 id="1-黄图鉴别">1. 黄图鉴别</h4>
<p>总得找点乐趣来提升一下学习兴趣，比如雅虎开源的这个项目，是用了鉴别是否是黄图的项目。项目地址：<a href="https://github.com/yahoo/open_nsfw">Open nsfw model</a>。</p>
<p>进入项目主页后，按照README.md的说明来安装，如果可以正常使用，那么恭喜你，docker入门了，后续的就自己玩吧。</p>
<h4 id="2-docker下安装kali">2. docker下安装kali</h4>
<p>（1）下载基础镜像</p>
<pre><code>docker pull kalilinux/kali-linux-docker
</code></pre><p>（2）启动镜像</p>
<pre><code>docker run -t -i kalilinux/kali-linux-docker /bin/bash
</code></pre><p>（3）安装metasploit</p>
<pre><code>apt-get install metasploit
</code></pre><p>(4)开始安装 wifite</p>
<pre><code>apt-get install wifite
</code></pre><h4 id="3-空间清理">3. 空间清理</h4>
<p>使用一段时间后，Docker.qcow2文件会增长的很快，而且不会自动缩小，不知道目前的版本是否解决了该问题。我使用的方式是直接删除该文件，重启docker后，会自动重新创建这个文件，当然会比原来小很多。</p>
<p>路径：/Users/yourname/Library/Containers/com.docker.docker/Data/com.docker.driver.amd64-linux</p>
<h4 id="4-端口映射">4. 端口映射</h4>
<h5 id="41-单端口映射">4.1 单端口映射</h5>
<pre><code>docker run  -it -p 9090:9090 ubuntu/code-dev /bin/bash
</code></pre><h5 id="42-多端口映射">4.2 多端口映射</h5>
<pre><code>docker run -p 9090:9090 -p 3306:3306 ubuntu/code-dev /bin/bash
</code></pre><h4 id="5-文件映射">5. 文件映射</h4>
<pre><code>docker run -it -v /Volumes/Transcend/docker_file:/home/mydev centos /bin/bash
</code></pre><h4 id="6-root权限">6. root权限</h4>
<pre><code>docker run --privileged -d --name centos-dpdk -it -v /Volumes/Transcend/docker_file:/home/mydev centos /sbin/init
</code></pre><h4 id="7-针对root用户创建密码">7. 针对root用户创建密码</h4>
<p>(1) 在基础容器centos中启动</p>
<pre><code>docker run -it 2d194b392dd1 /bin/bash
</code></pre><p>(2)修改root用户名密码</p>
<pre><code>passwd
</code></pre><p>(3)添加一个用户test1982</p>
<pre><code>useradd test1982
</code></pre><p>(4)退出容器</p>
<pre><code>exit
</code></pre><p>(5)提交该容器的修改</p>
<pre><code>docker commit 3c989e98fae6 vk:test
</code></pre><p>(6)使用已经创建的用户进行启动容器</p>
<pre><code>docker run -u test1982 -it 8ef50e485580 /bin/bash
</code></pre><p>(7)去除test1982的用户权限</p>
<pre><code>chmod go-rw hello_test
</code></pre><p>(8)至此容器保护工作完成,使用容器必须使用root用户才能进行访问。</p>
<p>遗憾的是，如果是这个容器的宿主机是安装在客户机子上的，那么客户可以使用以下命令进行无密码登录。</p>
<pre><code>docker exec -it -u 0 ebf62a489d1c /bin/bash
</code></pre><p>最终的结论就是docker容器是不支持设置密码的。
因为docker exec -it -u 0 就是直接使用了root密码，而且还是侵入式的，无法避免。</p>
<p>或者我的需求有点变态，在客户机的虚拟机上加密，只给客户提供服务，而不让看到其内部python代码吧!</p>
<h3 id="0x03-缘不灭">0x03 缘不灭</h3>
<p>仅仅只是由于自己想做一个断舍离，把注意力集中在一点，以后有机会用的时候还是会安装上的，不能怪自己的电脑硬盘小（128G），只是突然一瞬间感觉到，什么都去弄，到最后来该做的没有做好。时间有限，做好一件事就好，不是么？</p>
<p>程序员就是喜欢倒腾，我是一个程序员，想什么都学，但是选择的同时，还是想让自己专注一点。</p>
<p>在删除的时候，本想直接移到废纸篓，但是发现docker本身就带了删除功能。搞笑的事，最后还得走这一步，docker的删除仅仅是把Docker.qcow2文件删除了，避免自己删除应用后再去找这个文件删除。</p>

                <br>
                
                <p class="back-to-posts"><a href="https://guobingyi.github.io/blog">Back to posts</a></p>
            </div>
            <br>
            
            
        </div>
    </div>
</section>



<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-123-45', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/highlight.min.js"></script>
  

  <script type="text/javascript">
    hljs.initHighlightingOnLoad();
  </script>





</body>
</html>

